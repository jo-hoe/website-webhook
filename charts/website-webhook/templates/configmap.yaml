apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "website-webhook.fullname" . }}-config
  labels:
    {{- include "website-webhook.labels" . | nindent 4 }}
data:
  config.yaml: |-
    cron: "{{ .Values.cron }}"
    executeOnStartUp: {{ .Values.executeOnStartUp | default true }}
    enableJavaScript: {{ .Values.enableJavaScript | default false }}
    url: "{{ .Values.url }}"
    callback:
      url: "{{ .Values.callback.url }}"
      method: "{{ .Values.callback.method }}"
      enableJavaScript: "{{ .Values.callback.enableJavaScript }}"
      timeout: "{{ .Values.callback.timeout }}"
      maxRetries: {{ .Values.callback.maxRetries | default 0 }}
      headers:
        {{- toYaml .Values.callback.headers | nindent 8 }}
      body:
        {{- toYaml .Values.callback.body | nindent 8 }}
    commands:
      {{- with .Values.commands }}
        {{- toYaml . | nindent 8 }}
      {{- end }}